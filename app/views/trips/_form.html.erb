<%= simple_form_for @trip, html: { class: 'form-horizontal' } do |f| %>
  <%= f.error_notification %>
  <div class="row">
    <div class="col-md-6">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Your trip</h3>
        </div>
        <div class="panel-body">
          <%= f.input :departure_date, as: :string, wrapper: :horizontal_form, input_html: { class: 'datepicker' }, placeholder: 'Date' %>
          <%= f.input :departure_time, as: :time, wrapper: :horizontal_form, required: true, input_html: { style: 'display: initial; width: initial;' }, prompt: { hour: '', minute: '' } %>
          <%= f.simple_fields_for :points, @required_points do |p| %>
            <%= p.input :location_name, as: :string, wrapper: :horizontal_form, input_html: { class: 'geocoder' }, placeholder: t(p.object.kind.downcase), label: t(p.object.kind.downcase+'_place'), required: true %>
            <%= p.input :location_coordinates, as: :hidden %>
            <%= p.input :kind, as: :hidden %>
          <% end %>
          <%= f.input :price, wrapper: :horizontal_form %>
          <%= f.input :description, wrapper: :horizontal_form %>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Optional: Do you make steps?</h3>
        </div>
        <div class="panel-body">
          <% i = 0 %>
          <%= f.simple_fields_for :points, @optional_points do |p| %>
            <% i += 1 %>
            <%= p.input :location_name, as: :string, wrapper: :horizontal_form, input_html: { class: 'geocoder' }, placeholder: t(p.object.kind.downcase), label: t(p.object.kind.downcase+'_place') + " #{i}" %>
            <%= p.input :location_coordinates, as: :hidden %>
            <%= p.input :kind, as: :hidden %>
            <%= p.input :rank, as: :hidden %>
          <% end %>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">You</h3>
        </div>
        <div class="panel-body">
          <%= f.input :title, as: :radio_buttons, wrapper: :horizontal_radio_and_checkboxes, item_label_class: 'radio-inline', collection: [['Man', 'M'], ['Woman', 'W']], label: 'You are' %>
          <%= f.input :name, as: :string, wrapper: :horizontal_form %>
          <%= f.input :age, as: :string, wrapper: :horizontal_form %>
          <%= f.input :phone, as: :string, wrapper: :horizontal_form %>
          <%= f.input :email, as: :string, wrapper: :horizontal_form %>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Your car</h3>
        </div>
        <div class="panel-body">
          <%= f.input :seats, wrapper: :horizontal_form %>
          <%= f.input :comfort, wrapper: :horizontal_form, collection: Trip::CAR_RATINGS.map(&:to_sym) %>
        </div>
      </div>
      <%= f.submit 'Create your ad', class: 'btn btn-primary btn-lg pull-right' %>
    </div>
  </div>
<% end %>

<% content_for :javascript_footer do %>
  <script>
    initAutocomplete()
    initDatepicker()
  </script>
<% end %>